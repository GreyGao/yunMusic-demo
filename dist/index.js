"use strict";function pageGo(s){$(".tabs-main").eq(s).addClass("active").siblings().removeClass("active"),$(".mainPage").eq(s).addClass("active").siblings().removeClass("active")}function songSearch(){function s(s){r(),e(s,350,a)}function n(s){$("#searchResults").addClass("hide"),o($(s.currentTarget).val())}function e(s,n,e){p&&window.clearTimeout(p),p=setTimeout(function(){p=null,e(s)},n)}function a(s){var n=$(s.currentTarget).val();0===n.length?c():($("#searchLink").text('搜索"'+n+'"'),t(n).then(i))}function t(s){var n=new AV.Query("Song");n.contains("name",s);var e=new AV.Query("Song");e.contains("singer",s);var a=new AV.Query("Song");a.contains("album",s);var t=new AV.Query("Song");return t.contains("des",s),AV.Query.or(n,e,a,t).find()}function i(s){if($("#resultList").empty(),0===s.length){$("#resultList").append('<a class="resultSong"><i class="svg svg-search"></i><span>没有结果</span></a>')}else for(var n=0;n<s.length;n++){var e=h(s[n].attributes,s[n].id);$("#resultList").append(e)}}function c(){$("#search-holder").text("搜索歌曲、歌手、专辑"),$("#searchClose").addClass("hide"),$("#searchTips").removeClass("hide"),$("#searchResults").addClass("hide"),$("#resultList").empty()}function r(){$("#search-holder").text(""),$("#searchClose").removeClass("hide"),$("#searchTips").addClass("hide"),$(".resultMatch").addClass("hide"),$("#searchResults").removeClass("hide")}function o(s){l(),0!=s.length&&($("input#searchSong").val(s),$("#search-holder").text(""),e(s,350,function(s){t(s).then(u)}))}function l(){$(".resultMatch").removeClass("hide"),$("#searchTips").addClass("hide")}function u(s){if($("#matchSongList").empty(),0===s.length){$("#matchTitle").text("");$("#matchSongList").append("<p>暂无搜索结果</p>")}else for(var n=0;n<s.length;n++){var e=d(s[n].attributes,s[n].id);$("#matchSongList").append(e)}}function h(s,n){return"\n                <a href=/yunMusic-demo/play.html?id="+n+' class="resultSong">\n                <i class="svg svg-search"></i><span>'+s.name+" - "+s.singer+"</span></a>\n                "}function d(s,n){return"<a href=/yunMusic-demo/play.html?id="+n+' class="songInfo">\n                    <p class="songTitle">'+s.name+'<span class="songDesc">'+s.des+'</span></p>\n                    <p class="singer"><i class="icon icon-sq"></i>'+s.singer+" - "+s.album+'</p>\n                    <div class="playButton"><i class="icon icon-play"></i></div>\n                    </a>'}$("input#searchSong").bind("input",function(n){s(n)}).bind("focus",function(n){s(n)}).bind("keypress",function(s){n(s)}),$("#searchClose").on("click",function(){c(),$("input#searchSong").val(""),$(".resultMatch").addClass("hide")}),$("#hotSearchList").on("click","li",function(s){o($(s.currentTarget).text().trim())});var p=null}$(".tabs").on("click",".tabs-main",function(s){pageGo($(s.currentTarget).index())}),AV.init({appId:"zKM1TH8kc8MSMoh0pd6NcUYY-gzGzoHsz",appKey:"SutiQq6E6jY1WAwkDOgK4RpB"}),songSearch();